# 문제 해결 가이드

**오류가 발생했나요?** 여기서 해결 방법을 찾아보세요.

## 🔍 빠른 진단

### 문제를 찾는 방법

1. **오류 메시지 확인**
   - 검은 창에 나온 메시지를 그대로 읽어보세요
   - 마지막 줄의 오류 메시지가 중요합니다

2. **오류 메시지 검색**
   - 오류 메시지를 그대로 복사
   - 인터넷 검색 (Google 등)
   - 보통 해결 방법이 나옵니다

3. **이 가이드에서 찾기**
   - 아래 목록에서 비슷한 문제 찾기
   - 해결 방법 따라하기

---

## 📋 자주 발생하는 문제

### 문제 1: Python이 설치되지 않았거나 인식되지 않음

**증상:**
```
'python'은(는) 내부 또는 외부 명령, 실행할 수 있는 프로그램 또는 배치 파일이 아닙니다.
```

**원인:**
- Python이 설치되지 않음
- PATH 환경 변수에 Python이 추가되지 않음

**해결 방법:**

**방법 1: Python 재설치**
1. https://www.python.org/downloads/ 접속
2. Python 다운로드 및 설치
3. **중요**: "Add Python to PATH" 체크박스에 반드시 체크!
4. 컴퓨터 재시작

**방법 2: PATH 수동 추가**
1. Windows 검색에서 "환경 변수" 검색
2. "시스템 환경 변수 편집" 클릭
3. "환경 변수" 버튼 클릭
4. "Path" 선택 → "편집"
5. "새로 만들기" 클릭
6. Python 설치 경로 추가 (예: `C:\Users\사용자명\AppData\Local\Programs\Python\Python3xx`)
7. 확인 클릭
8. 컴퓨터 재시작

**확인:**
```bash
python --version
```
버전 번호가 나오면 성공!

---

### 문제 2: pip 명령어가 작동하지 않음

**증상:**
```
'pip'은(는) 내부 또는 외부 명령...
```

**원인:**
- pip가 설치되지 않음
- Python 설치가 불완전함

**해결 방법:**

**방법 1: Python 재설치**
- 위 "문제 1" 참고
- Python 설치 시 pip도 함께 설치됨

**방법 2: pip 수동 설치**
```bash
python -m ensurepip --upgrade
```

**방법 3: python -m pip 사용**
```bash
python -m pip install -r requirements.txt
```

---

### 문제 3: 모듈을 찾을 수 없음

**증상:**
```
ModuleNotFoundError: No module named 'xxx'
```

**원인:**
- 필요한 패키지가 설치되지 않음

**해결 방법:**

```bash
cd c:\write
pip install -r requirements.txt
```

**특정 모듈만 설치:**
```bash
pip install 모듈이름
```

예:
```bash
pip install python-dotenv
pip install openai
pip install chromadb
```

---

### 문제 4: API 키 오류

**증상:**
```
API 키가 설정되지 않았습니다.
또는
API 호출 실패: Invalid API key
```

**원인:**
- `.env` 파일이 없음
- API 키가 잘못됨
- API 키 형식이 잘못됨

**해결 방법:**

**1단계: .env 파일 확인**
1. `c:\write\.env` 파일이 있는지 확인
2. 파일이 없으면 만들기 (위 가이드 참고)

**2단계: 파일 내용 확인**
파일을 열어서 다음 형식인지 확인:
```
OPENAI_API_KEY=sk-proj-abc123...
```

**확인 사항:**
- ✅ `OPENAI_API_KEY=` 앞뒤 공백 없음
- ✅ `=` 기호 양쪽 공백 없음
- ✅ 키 앞에 `sk-` 또는 `sk-proj-`로 시작
- ✅ 키에 공백이나 줄바꿈 없음

**3단계: API 키 재확인**
1. OpenAI 웹사이트 접속
2. API Keys 메뉴
3. 키가 활성화되어 있는지 확인
4. 필요시 새 키 생성

**4단계: 테스트**
```bash
python scripts/test_api.py
```

---

### 문제 5: API 호출 실패 (네트워크 오류)

**증상:**
```
API 호출 실패: Connection error
또는
Timeout error
```

**원인:**
- 인터넷 연결 문제
- 방화벽 차단
- API 서버 문제

**해결 방법:**

**1단계: 인터넷 연결 확인**
- 브라우저에서 웹사이트 접속 테스트
- OpenAI 웹사이트 접속 가능한지 확인

**2단계: 방화벽 확인**
- Windows 방화벽 설정 확인
- Python이 인터넷 접근 허용되어 있는지 확인

**3단계: VPN/프록시 확인**
- VPN 사용 중이면 끄고 테스트
- 회사 네트워크면 IT 부서에 문의

**4단계: API 서버 상태 확인**
- OpenAI Status 페이지 확인
- 서버 문제면 대기

---

### 문제 6: API 사용량 초과

**증상:**
```
API 호출 실패: Rate limit exceeded
또는
Insufficient quota
```

**원인:**
- API 사용량 한도 초과
- 결제 정보 문제

**해결 방법:**

**1단계: 사용량 확인**
1. OpenAI 웹사이트 접속
2. Usage 메뉴 확인
3. 사용량과 한도 확인

**2단계: 결제 정보 확인**
1. Billing 메뉴 확인
2. 결제 수단 유효성 확인
3. 필요시 충전

**3단계: 사용량 줄이기**
- 짧은 텍스트만 생성
- 배치 생성 시 delay 증가
- 로컬 모델 사용 고려

---

### 문제 7: 한글 인코딩 오류

**증상:**
```
UnicodeEncodeError
또는
한글이 깨져서 보임
```

**원인:**
- 파일 인코딩 문제
- 콘솔 인코딩 문제

**해결 방법:**

**방법 1: 파일 인코딩 변경**
1. 메모장에서 파일 열기
2. "다른 이름으로 저장"
3. 인코딩: UTF-8 선택
4. 저장

**방법 2: 콘솔 인코딩 변경**
명령 프롬프트에서:
```bash
chcp 65001
```

**방법 3: Python 스크립트에 인코딩 설정 추가**
스크립트 맨 위에:
```python
import sys
if sys.platform == "win32":
    sys.stdout.reconfigure(encoding='utf-8')
```

---

### 문제 8: 파일을 찾을 수 없음

**증상:**
```
FileNotFoundError: [Errno 2] No such file or directory
```

**원인:**
- 경로가 잘못됨
- 파일이 실제로 없음
- 현재 위치가 잘못됨

**해결 방법:**

**1단계: 현재 위치 확인**
```bash
cd
```
현재 폴더 경로 확인

**2단계: 올바른 위치로 이동**
```bash
cd c:\write
```

**3단계: 파일 확인**
```bash
dir
```
또는
```bash
ls
```
파일 목록 확인

**4단계: 파일 경로 확인**
- 파일 탐색기에서 정확한 경로 확인
- 경로에 한글이나 특수문자 없는지 확인

---

### 문제 9: 권한 오류

**증상:**
```
PermissionError: [Errno 13] Permission denied
```

**원인:**
- 파일/폴더에 쓰기 권한 없음
- 관리자 권한 필요

**해결 방법:**

**방법 1: 관리자 권한으로 실행**
1. 명령 프롬프트 우클릭
2. "관리자 권한으로 실행" 선택
3. 다시 시도

**방법 2: 파일 권한 확인**
1. 파일/폴더 우클릭
2. "속성" → "보안" 탭
3. 권한 확인 및 수정

**방법 3: 다른 위치에 저장**
- 사용자 폴더에 저장 시도
- 예: `C:\Users\사용자명\Documents\`

---

### 문제 10: 메모리 부족

**증상:**
```
MemoryError
또는
프로그램이 느리게 실행됨
```

**원인:**
- 메모리 부족
- 너무 큰 파일 처리

**해결 방법:**

**방법 1: 다른 프로그램 종료**
- 불필요한 프로그램 종료
- 메모리 확보

**방법 2: 작은 단위로 처리**
- 긴 텍스트를 나눠서 처리
- 배치 크기 줄이기

**방법 3: 컴퓨터 사양 확인**
- RAM 용량 확인
- 필요시 업그레이드

---

## 🔧 고급 문제 해결

### 로그 확인하기

**Python 오류 상세 정보:**
```python
import traceback
try:
    # 코드 실행
except Exception as e:
    traceback.print_exc()
```

### 디버그 모드 실행

**상세 오류 메시지:**
```bash
python -u script_name.py
```

### 환경 확인

**Python 버전:**
```bash
python --version
```

**설치된 패키지:**
```bash
pip list
```

**특정 패키지 버전:**
```bash
pip show 패키지이름
```

---

## 📞 추가 도움

### 도움 받는 방법

1. **오류 메시지 복사**
   - 검은 창에서 오류 메시지 전체 복사
   - 정확히 복사하는 것이 중요

2. **상황 설명**
   - 무엇을 하려고 했는지
   - 어떤 명령어를 실행했는지
   - 언제부터 문제가 생겼는지

3. **검색**
   - 오류 메시지를 Google에 검색
   - Stack Overflow 등에서 해결 방법 찾기

4. **문서 확인**
   - `GUIDE_FOR_BEGINNERS.md` 확인
   - `USAGE.md` 확인
   - `README.md` 확인

---

## ✅ 체크리스트

문제가 발생했을 때 확인할 것들:

- [ ] Python이 설치되어 있고 작동하는가?
- [ ] 필요한 패키지가 모두 설치되었는가?
- [ ] `.env` 파일이 있고 올바른가?
- [ ] API 키가 유효한가?
- [ ] 인터넷 연결이 되어 있는가?
- [ ] 현재 위치가 올바른가? (`c:\write`)
- [ ] 파일 권한이 있는가?
- [ ] 파일 경로에 한글/특수문자가 없는가?

---

## 💡 예방 방법

**문제를 미리 방지하는 방법:**

1. **정기 백업**
   ```bash
   python scripts/backup_restore.py backup --novel-id 소설ID
   ```

2. **API 사용량 모니터링**
   - OpenAI 웹사이트에서 사용량 확인
   - 예산 설정

3. **테스트 먼저**
   - 큰 작업 전에 작은 테스트 실행
   - `test_api.py`로 API 확인

4. **문서 읽기**
   - 사용 전 가이드 읽기
   - 기능별 문서 확인

---

**문제가 해결되지 않나요?**

1. 오류 메시지를 정확히 기록
2. 상황을 자세히 설명
3. 시도한 해결 방법 기록
4. 도움 요청 (커뮤니티, 포럼 등)

